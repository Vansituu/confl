{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Federico/Downloads/Coin-Flip-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Federico/Downloads/Coin-Flip-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Federico\\\\Downloads\\\\Coin-Flip-main\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import CoinFlip from\"./CoinFlip\";import{useLocation}from'react-router-dom';import{useEffect,useState}from\"react\";import coinReady from'./coin-back-ready.svg';import coinLoading from'./coin-back-loading.svg';import Player from'./Player';import'./Game.css';import Confetti from'react-confetti';import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Game(){var location=useLocation();var _useState=useState(location.state?location.state:null),_useState2=_slicedToArray(_useState,2),gameData=_useState2[0],changeGameData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),gameFinished=_useState4[0],setGameFinished=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),startFlip=_useState6[0],setStartFlip=_useState6[1];function loadGame(){return _loadGame.apply(this,arguments);}function _loadGame(){_loadGame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({gameID:gameData.gameID})};// console.log(gameData.gameID)\nfetch('/checkGameState',requestOptions).then(function(result){return result.json();}).then(function(result){if(result.name){changeGameData({'p1':{'name':gameData.p1.name,'side':gameData.p1.side},'p2':{'name':result.name,'side':result.side},'winner':result.winner,'bet':gameData.bet,'gameID':gameData.gameID});}else if(result.error){console.log(result.error);changeGameData(null);// this will cause the client to be navigated to home and the game be abandoned\n}else{// if player 2 not found (result.name = null) then poll again\nsetTimeout(loadGame,2000);}}).catch(function(err){// this will cause the client to be navigated to home and the game be abandoned\nconsole.log(err);changeGameData(null);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _loadGame.apply(this,arguments);}useEffect(function(){if(gameData===null){return;// this is to not allow people onto this page if they haven't gone through the 'flip' page\n}else if(!gameData.winner){setTimeout(loadGame,2000);// this client is p1, so schedule the polling for p2 to join\n}else if(gameData.winner){setTimeout(function(){setStartFlip(true);},3000);setTimeout(function(){setGameFinished(true);},8000);}},[gameData]);return gameData?/*#__PURE__*/_jsxs(\"div\",{id:\"Game\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"GamePrize\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"GamePrizeText\",children:\"Cash Prize:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"GamePrizeAmount\",children:gameData.bet!==\"None\"?gameData.bet*2:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"GameMain\",children:[/*#__PURE__*/_jsx(Player,{name:gameData.p1.name,side:gameData.p1.side,result:gameFinished?gameData.winner===gameData.p1.side?'-winner':'':''}),/*#__PURE__*/_jsx(CoinFlip,{className:\"CoinFlipAnimation\",width:300,height:300,animation:gameFinished?'done':!startFlip?'loading':'ready',winningSide:!startFlip?null:gameData.winner,image:!startFlip?coinLoading:coinReady}),gameData.winner===null?/*#__PURE__*/_jsx(\"div\",{style:{width:'400px',height:'150px'}}):/*#__PURE__*/_jsx(Player,{name:gameData.p2.name,side:gameData.p2.side,wallet:gameData.p2.wallet,result:gameFinished?gameData.winner===gameData.p2.side?'-winner':'':''})]}),gameFinished&&gameData.p2.side===gameData.winner?/*#__PURE__*/_jsx(Confetti,{confettiSource:{x:gameData.winner===gameData.p1.side?0:window.innerWidth-300,y:0,w:300,h:0}}):null,gameFinished&&gameData.p1.side===gameData.winner?/*#__PURE__*/_jsx(Confetti,{confettiSource:{x:0,y:0,w:300,h:0}}):null,gameFinished?/*#__PURE__*/_jsxs(\"div\",{className:\"GameOverOptions\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"GameOverOption\",href:\"/flip\",children:\"Play Again\"}),/*#__PURE__*/_jsx(\"a\",{className:\"GameOverOption\",href:\"/\",children:\"Return to Home\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"GameOverOptions\"})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}export default Game;","map":{"version":3,"sources":["C:/Users/Federico/Downloads/Coin-Flip-main/client/src/Game.js"],"names":["CoinFlip","useLocation","useEffect","useState","coinReady","coinLoading","Player","Confetti","Navigate","Game","location","state","gameData","changeGameData","gameFinished","setGameFinished","startFlip","setStartFlip","loadGame","requestOptions","method","headers","body","JSON","stringify","gameID","fetch","then","result","json","name","p1","side","winner","bet","error","console","log","setTimeout","catch","err","width","height","p2","wallet","x","window","innerWidth","y","w","h"],"mappings":"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","sourcesContent":["import CoinFlip from \"./CoinFlip\";\nimport { useLocation } from 'react-router-dom';\nimport { useEffect, useState } from \"react\";\nimport coinReady from './coin-back-ready.svg';\nimport coinLoading from './coin-back-loading.svg';\nimport Player from './Player';\nimport './Game.css';\nimport Confetti from 'react-confetti';\nimport { Navigate } from \"react-router-dom\";\n\nfunction Game() {\n    const location = useLocation();\n    const [gameData, changeGameData] = useState(location.state ? location.state : null);\n    const [gameFinished, setGameFinished] = useState(false);\n    const [startFlip, setStartFlip] = useState(false)\n\n    async function loadGame() {\n        let requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({gameID: gameData.gameID})\n        };\n        // console.log(gameData.gameID)\n        fetch('/checkGameState', requestOptions)\n            .then(result => result.json())\n            .then(result => {\n                if (result.name) {\n                    changeGameData({\n                        'p1': {'name': gameData.p1.name, 'side': gameData.p1.side},\n                        'p2': {'name': result.name, 'side': result.side},\n                        'winner': result.winner,\n                        'bet': gameData.bet,\n                        'gameID': gameData.gameID\n                    })\n                }\n                else if (result.error) {\n                    console.log(result.error);\n                    changeGameData(null); // this will cause the client to be navigated to home and the game be abandoned\n                }\n                else { // if player 2 not found (result.name = null) then poll again\n                    setTimeout(loadGame, 2000); \n                }\n            })\n            .catch(err => { // this will cause the client to be navigated to home and the game be abandoned\n                console.log(err);\n                changeGameData(null);\n            })\n    }\n\n    useEffect(() => {\n        if (gameData === null) {\n            return; // this is to not allow people onto this page if they haven't gone through the 'flip' page\n        }\n        else if (!gameData.winner) { \n            setTimeout(loadGame, 2000); // this client is p1, so schedule the polling for p2 to join\n        }\n        else if (gameData.winner) {\n            setTimeout(() => {setStartFlip(true)}, 3000);\n            setTimeout(() => {setGameFinished(true)}, 8000);\n        }\n    }, [gameData]);\n\n    return (\n        (gameData ?\n        <div id=\"Game\">\n            <div className=\"GamePrize\">\n                <div className=\"GamePrizeText\">Cash Prize:</div>\n                <div className=\"GamePrizeAmount\">{gameData.bet !== \"None\" ? gameData.bet * 2 : \"0\"}</div>\n            </div>\n            <div id=\"GameMain\">\n                <Player name={gameData.p1.name} side={gameData.p1.side} result={gameFinished ? (gameData.winner === gameData.p1.side ? '-winner' : '') : ''}/>\n                <CoinFlip className=\"CoinFlipAnimation\" width={300} height={300} animation={gameFinished ? 'done' : (!startFlip ? 'loading' : 'ready')} winningSide={!startFlip ? null : gameData.winner} image={!startFlip ? coinLoading : coinReady}/>\n                {gameData.winner === null ? <div style={{width: '400px', height: '150px'}}></div> : <Player name={gameData.p2.name} side={gameData.p2.side} wallet={gameData.p2.wallet} result={gameFinished ? (gameData.winner === gameData.p2.side ? '-winner' : '') : ''}/>}\n            </div>\n            {gameFinished && gameData.p2.side === gameData.winner ? <Confetti confettiSource={{ x: (gameData.winner === gameData.p1.side ? 0 : window.innerWidth - 300), y: 0, w: 300, h: 0 }}/> : null}\n            {gameFinished && gameData.p1.side === gameData.winner ? <Confetti confettiSource={{ x: 0, y: 0, w: 300, h: 0 }}/> : null}\n            {gameFinished ?  <div className=\"GameOverOptions\">\n                                    <a className=\"GameOverOption\" href=\"/flip\">Play Again</a>\n                                    <a className=\"GameOverOption\" href=\"/\">Return to Home</a>\n                                </div> \n                        : <div className=\"GameOverOptions\"></div>\n            }\n        </div>\n        : <Navigate to=\"/\" />)\n    );\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}