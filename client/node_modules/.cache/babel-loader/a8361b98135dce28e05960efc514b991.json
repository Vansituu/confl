{"ast":null,"code":"var _jsxFileName = \"/Users/joshcodrescu/Desktop/coin-flip/client/src/Game.js\",\n    _s = $RefreshSig$();\n\nimport CoinFlip from \"./CoinFlip\";\nimport { useLocation } from 'react-router-dom';\nimport { useEffect, useState } from \"react\";\nimport coinReady from './coin-back-ready.svg';\nimport coinLoading from './coin-back-loading.svg';\nimport Player from './Player';\nimport './Game.css';\nimport Confetti from 'react-confetti';\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Game() {\n  _s();\n\n  const location = useLocation();\n  const [gameData, changeGameData] = useState(location.state ? location.state : null);\n  const [gameFinished, setGameFinished] = useState(false);\n  const [startFlip, setStartFlip] = useState(false);\n\n  async function loadGame() {\n    let requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        gameID: gameData.gameID\n      })\n    }; // console.log(gameData.gameID)\n\n    fetch('/checkGameState', requestOptions).then(result => result.json()).then(result => {\n      if (result.name) {\n        changeGameData({\n          'p1': {\n            'name': gameData.p1.name,\n            'side': gameData.p1.side\n          },\n          'p2': {\n            'name': result.name,\n            'side': result.side\n          },\n          'winner': result.winner,\n          'bet': gameData.bet,\n          'gameID': gameData.gameID\n        });\n      } else if (result.error) {\n        console.log(result.error);\n        changeGameData(null); // this will cause the client to be navigated to home and the game be abandoned\n      } else {\n        // if player 2 not found (result.name = null) then poll again\n        setTimeout(loadGame, 2000);\n      }\n    }).catch(err => {\n      // this will cause the client to be navigated to home and the game be abandoned\n      console.log(err);\n      changeGameData(null);\n    });\n  }\n\n  useEffect(() => {\n    if (gameData === null) {\n      return; // this is to not allow people onto this page if they haven't gone through the 'flip' page\n    } else if (!gameData.winner) {\n      setTimeout(loadGame, 2000); // this client is p1, so schedule the polling for p2 to join\n    } else if (gameData.winner) {\n      setTimeout(() => {\n        setStartFlip(true);\n      }, 3000);\n      setTimeout(() => {\n        setGameFinished(true);\n      }, 8000);\n    }\n  }, [gameData]);\n  return gameData ? /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"Game\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"GamePrize\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"GamePrizeText\",\n        children: \"Cash Prize:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"GamePrizeAmount\",\n        children: gameData.bet !== \"None\" ? gameData.bet * 2 : \"0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"GameMain\",\n      children: [/*#__PURE__*/_jsxDEV(Player, {\n        name: gameData.p1.name,\n        side: gameData.p1.side,\n        result: gameFinished ? gameData.winner === gameData.p1.side ? '-winner' : '' : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CoinFlip, {\n        className: \"CoinFlipAnimation\",\n        width: 300,\n        height: 300,\n        animation: gameFinished ? 'done' : !startFlip ? 'loading' : 'ready',\n        winningSide: !startFlip ? null : gameData.winner,\n        image: !startFlip ? coinLoading : coinReady\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), gameData.winner === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '400px',\n          height: '150px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 45\n      }, this) : /*#__PURE__*/_jsxDEV(Player, {\n        name: gameData.p2.name,\n        side: gameData.p2.side,\n        wallet: gameData.p2.wallet,\n        result: gameFinished ? gameData.winner === gameData.p2.side ? '-winner' : '' : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 101\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), gameFinished && gameData.p2.side === gameData.winner ? /*#__PURE__*/_jsxDEV(Confetti, {\n      confettiSource: {\n        x: gameData.winner === gameData.p1.side ? 0 : window.innerWidth - 300,\n        y: 0,\n        w: 300,\n        h: 0\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 69\n    }, this) : null, gameFinished && gameData.p1.side === gameData.winner ? /*#__PURE__*/_jsxDEV(Confetti, {\n      confettiSource: {\n        x: 0,\n        y: 0,\n        w: 300,\n        h: 0\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 69\n    }, this) : null, gameFinished ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"GameOverOptions\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"GameOverOption\",\n        href: \"/flip\",\n        children: \"Play Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"GameOverOption\",\n        href: \"/\",\n        children: \"Return to Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 30\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"GameOverOptions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 11\n  }, this);\n}\n\n_s(Game, \"lGAL6Yq28LMCy6myK1YKuyxHtg0=\", false, function () {\n  return [useLocation];\n});\n\n_c = Game;\nexport default Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"sources":["/Users/joshcodrescu/Desktop/coin-flip/client/src/Game.js"],"names":["CoinFlip","useLocation","useEffect","useState","coinReady","coinLoading","Player","Confetti","Navigate","Game","location","gameData","changeGameData","state","gameFinished","setGameFinished","startFlip","setStartFlip","loadGame","requestOptions","method","headers","body","JSON","stringify","gameID","fetch","then","result","json","name","p1","side","winner","bet","error","console","log","setTimeout","catch","err","width","height","p2","wallet","x","window","innerWidth","y","w","h"],"mappings":"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","sourcesContent":["import CoinFlip from \"./CoinFlip\";\nimport { useLocation } from 'react-router-dom';\nimport { useEffect, useState } from \"react\";\nimport coinReady from './coin-back-ready.svg';\nimport coinLoading from './coin-back-loading.svg';\nimport Player from './Player';\nimport './Game.css';\nimport Confetti from 'react-confetti';\nimport { Navigate } from \"react-router-dom\";\n\nfunction Game() {\n    const location = useLocation();\n    const [gameData, changeGameData] = useState(location.state ? location.state : null);\n    const [gameFinished, setGameFinished] = useState(false);\n    const [startFlip, setStartFlip] = useState(false)\n\n    async function loadGame() {\n        let requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({gameID: gameData.gameID})\n        };\n        // console.log(gameData.gameID)\n        fetch('/checkGameState', requestOptions)\n            .then(result => result.json())\n            .then(result => {\n                if (result.name) {\n                    changeGameData({\n                        'p1': {'name': gameData.p1.name, 'side': gameData.p1.side},\n                        'p2': {'name': result.name, 'side': result.side},\n                        'winner': result.winner,\n                        'bet': gameData.bet,\n                        'gameID': gameData.gameID\n                    })\n                }\n                else if (result.error) {\n                    console.log(result.error);\n                    changeGameData(null); // this will cause the client to be navigated to home and the game be abandoned\n                }\n                else { // if player 2 not found (result.name = null) then poll again\n                    setTimeout(loadGame, 2000); \n                }\n            })\n            .catch(err => { // this will cause the client to be navigated to home and the game be abandoned\n                console.log(err);\n                changeGameData(null);\n            })\n    }\n\n    useEffect(() => {\n        if (gameData === null) {\n            return; // this is to not allow people onto this page if they haven't gone through the 'flip' page\n        }\n        else if (!gameData.winner) { \n            setTimeout(loadGame, 2000); // this client is p1, so schedule the polling for p2 to join\n        }\n        else if (gameData.winner) {\n            setTimeout(() => {setStartFlip(true)}, 3000);\n            setTimeout(() => {setGameFinished(true)}, 8000);\n        }\n    }, [gameData]);\n\n    return (\n        (gameData ?\n        <div id=\"Game\">\n            <div className=\"GamePrize\">\n                <div className=\"GamePrizeText\">Cash Prize:</div>\n                <div className=\"GamePrizeAmount\">{gameData.bet !== \"None\" ? gameData.bet * 2 : \"0\"}</div>\n            </div>\n            <div id=\"GameMain\">\n                <Player name={gameData.p1.name} side={gameData.p1.side} result={gameFinished ? (gameData.winner === gameData.p1.side ? '-winner' : '') : ''}/>\n                <CoinFlip className=\"CoinFlipAnimation\" width={300} height={300} animation={gameFinished ? 'done' : (!startFlip ? 'loading' : 'ready')} winningSide={!startFlip ? null : gameData.winner} image={!startFlip ? coinLoading : coinReady}/>\n                {gameData.winner === null ? <div style={{width: '400px', height: '150px'}}></div> : <Player name={gameData.p2.name} side={gameData.p2.side} wallet={gameData.p2.wallet} result={gameFinished ? (gameData.winner === gameData.p2.side ? '-winner' : '') : ''}/>}\n            </div>\n            {gameFinished && gameData.p2.side === gameData.winner ? <Confetti confettiSource={{ x: (gameData.winner === gameData.p1.side ? 0 : window.innerWidth - 300), y: 0, w: 300, h: 0 }}/> : null}\n            {gameFinished && gameData.p1.side === gameData.winner ? <Confetti confettiSource={{ x: 0, y: 0, w: 300, h: 0 }}/> : null}\n            {gameFinished ?  <div className=\"GameOverOptions\">\n                                    <a className=\"GameOverOption\" href=\"/flip\">Play Again</a>\n                                    <a className=\"GameOverOption\" href=\"/\">Return to Home</a>\n                                </div> \n                        : <div className=\"GameOverOptions\"></div>\n            }\n        </div>\n        : <Navigate to=\"/\" />)\n    );\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}